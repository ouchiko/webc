{"version":3,"sources":["app.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","Object","defineProperty","value","default","ExceptionManager","message","exception","instance","Constructor","TypeError","_classCallCheck","this","console","log","2","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","Mapping","nodeID","mapStyling","lat","lon","zoom","window","sys","map","mapboxKey","initialiseMapView","delayedFlyTo","sw","getBounds","getSouthWest","ne","getNorthEast","on","flyTo","center","pitch","bearing","mapboxgl","accessToken","Map","container","style","3","Loader","mapid","data","JSON","stringify","id","uri","domain","func","fetch","then","response","contentType","headers","get","includes","json","catch","error","4","_interopRequireDefault","obj","__esModule","_Search2","_Information2","Events","document","querySelector","innerHTML","mapdata","title","sub_title","hotelFactory","allowHotelSearchToRun","cleanFactory","mapping","addEventListener","reference","getAttribute","tmpref","parentNode","greysky","rightblockui","newzoom","getZoom","classList","remove","add","settings","currentLatLon","getCenter","hotel","dataset","longitude","latitude","wait","setInterval","isMoving","clearInterval","hotelName","starRatingString","stars","opacity","marginLeft","offsetWidth","searchbar","results","top","ui","../hotels/Information","../hotels/helpers/Search","5","Hotel","generateBaseHotelIcon","baseIcon","createElement","hotelIcon","hotelSpinSearch","setAttribute","hmid","name","appendChild","marker","Marker","setLngLat","LngLat","addTo","rate","starsHTML","hotelRateElement","Price","Currency","Symbol","Math","floor","OfferRate","dir","6","_ExceptionManager2","HotelFactory","hotelFactoryCollection","bounds","milat","milon","lng","malat","malon","deleteHotel","node","removeChild","hotelRemovalException","../ExceptionManager","7","Information","loadExtendedHoteInformation","hotelLoader","hotelInfo","hideLoadingView","hotelImage","hotelBrand","hotelTitle","hotelStars","hotelAddress","hotelDescription","hotelRates","hotelPoints","base","brand","brandName","backgroundImage","images","primary","LargeImage","address1","description","_this","showLoadingView","attachDataToDOM","8","Rates","hmids","buildRequestSets","requestRateRequest","mapRefId","count","tmp","j","push","hotel_group","status","content","AvailabilityResponse","Results","HotelInfo","FullyBooked","HMID","addFullBooked","_hotel","addBaseRate","Rooms","9","_Hotel2","_Rates2","Search","hmidSet","runSearch","feedID","exists","addBuildSet","../Hotel","./Rates","10","getUrlParams","search","slice","indexOf","split","reduce","params","hash","_hash$split","_hash$split2","_slicedToArray","val","assign","_defineProperty","decodeURIComponent","arr","Array","isArray","iterator","_arr","_n","_d","_e","undefined","_s","_i","next","done","err","sliceIterator","_Loader2","_Mapping2","_HotelFactory2","_Events2","parameters","location","href","loader","loadConfiguration","map_latitude","map_longitude","map_zoom","fillHeader","attachHotelLoader","addSearchResultsView","addSettingsOpenButtonEvent","addRightUICloseEvent","addHotelClickEvent","./hotelmap/ExceptionManager","./hotelmap/Mapping","./hotelmap/configuration/Loader","./hotelmap/events/Events","./hotelmap/hotels/HotelFactory"],"mappings":"CAAA,SAAUA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAkB,mBAATC,SAAqBA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,IAAIS,YAAYb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,IAAIE,EAAED,EAAEI,GAAG,GAAGL,GAAG,OAAOI,EAAEF,GAAIF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAkD,IAAI,IAA1CL,EAAkB,mBAATD,SAAqBA,QAAgBH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAAvb,EAA4ba,GAAG,SAAST,EAAQU,EAAOJ,GACvd,aAEAK,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAYXP,EAAQQ,QAPe,SAASC,EAAiBC,EAASC,IAF1D,SAAyBC,EAAUC,GAAe,KAAMD,aAG9BH,GAHkE,MAAM,IAAIK,UAAU,qCAG5GC,CAAgBC,MAEhBC,QAAQC,IAAI,aAAeR,GAC3BO,QAAQC,IAAIP,SAKVQ,GAAG,SAASzB,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAGX,IAAIa,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAMrB,OAAQP,IAAK,CAAE,IAAI6B,EAAaD,EAAM5B,GAAI6B,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMtB,OAAOC,eAAegB,EAAQE,EAAWI,IAAKJ,IAAiB,OAAO,SAAUX,EAAagB,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBR,EAAYkB,UAAWF,GAAiBC,GAAaT,EAAiBR,EAAaiB,GAAqBjB,GAA7gB,GAcfmB,EAAU,WACV,SAASA,EAAQC,EAAQC,EAAYC,EAAKC,EAAKC,IAbnD,SAAyBzB,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAcxGC,CAAgBC,KAAMgB,GAGtBM,OAAOC,IAAIC,IAAM,KACjBxB,KAAKyB,UAAY,wFACjBzB,KAAKkB,WAAaA,EAClBlB,KAAKiB,OAASA,EACdjB,KAAKmB,IAAMA,EACXnB,KAAKoB,IAAMA,EACXpB,KAAKqB,KAAOA,EAGZrB,KAAK0B,oBACL1B,KAAK2B,eAiDT,OA9CAvB,EAAaY,IACTJ,IAAK,YACLrB,MAAO,WAIH,OACIqC,GAJWN,OAAOC,IAAIC,IAAIK,YAAYC,eAKtCC,GAJWT,OAAOC,IAAIC,IAAIK,YAAYG,mBAQ9CpB,IAAK,eACLrB,MAAO,WACH,IAAI4B,EAAMnB,KAAKmB,IACXC,EAAMpB,KAAKoB,IACXC,EAAOrB,KAAKqB,KAChBC,OAAOC,IAAIC,IAAIS,GAAG,OAAQ,WACtBjC,KAAKkC,OACDC,QAASf,EAAKD,GACdE,KAAMA,EACNe,MAAO,EACPC,QAAS,SAUrBzB,IAAK,oBACLrB,MAAO,WACH+B,OAAOC,IAAIe,SAASC,YAAcvC,KAAKyB,UACvCH,OAAOC,IAAIC,IAAM,IAAIF,OAAOC,IAAIe,SAASE,KACrCC,UAAWzC,KAAKiB,OAChByB,MAAO1C,KAAKkB,WACZiB,QAASnC,KAAKoB,IAAKpB,KAAKmB,KACxBiB,MAAO,IACPC,SAAU,GACVhB,KAAMrB,KAAKqB,KAAO,QAKvBL,EAhEG,GAmEdhC,EAAQQ,QAAUwB,OAEZ2B,GAAG,SAASjE,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAGX,IAAIa,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAMrB,OAAQP,IAAK,CAAE,IAAI6B,EAAaD,EAAM5B,GAAI6B,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMtB,OAAOC,eAAegB,EAAQE,EAAWI,IAAKJ,IAAiB,OAAO,SAAUX,EAAagB,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBR,EAAYkB,UAAWF,GAAiBC,GAAaT,EAAiBR,EAAaiB,GAAqBjB,GAA7gB,GAcf+C,EAAS,WAMT,SAASA,EAAOC,IAlBpB,SAAyBjD,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAmBxGC,CAAgBC,KAAM4C,GAEtB,IAAIE,EAAOC,KAAKC,WAAYC,GAAMJ,IAClC7C,KAAKkD,IAAM,WAAa5B,OAAOC,IAAI4B,OAAS,iDAAmDL,EA4BnG,OAjBA1C,EAAawC,IACThC,IAAK,oBACLrB,MAAO,SAA2B6D,GAC9BC,MAAMrD,KAAKkD,KAAKI,KAAK,SAAUC,GAC3B,IAAIC,EAAcD,EAASE,QAAQC,IAAI,gBACvC,GAAIF,GAAeA,EAAYG,SAAS,oBACpC,OAAOJ,EAASK,OAEpB,MAAM,IAAI9D,UAAU,gCACrBwD,KAAK,SAAUM,GACdR,EAAKQ,KACNC,MAAM,SAAUC,GACf7D,QAAQC,IAAI4D,SAKjBlB,EAtCE,GAyCb5D,EAAQQ,QAAUoD,OAEZmB,GAAG,SAASrF,EAAQU,EAAOJ,GACjC,aAgBA,SAASgF,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,GAAQzE,QAASyE,GAdvF5E,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAGX,IAAIa,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAMrB,OAAQP,IAAK,CAAE,IAAI6B,EAAaD,EAAM5B,GAAI6B,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMtB,OAAOC,eAAegB,EAAQE,EAAWI,IAAKJ,IAAiB,OAAO,SAAUX,EAAagB,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBR,EAAYkB,UAAWF,GAAiBC,GAAaT,EAAiBR,EAAaiB,GAAqBjB,GAA7gB,GAIfsE,EAAWH,EAFDtF,EAAQ,6BAMlB0F,EAAgBJ,EAFDtF,EAAQ,0BAQvB2F,EAAS,WACT,SAASA,KAHb,SAAyBzE,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAIxGC,CAAgBC,KAAMqE,GA+J1B,OA5JAjE,EAAaiE,EAAQ,OACjBzD,IAAK,aACLrB,MAAO,WACa+E,SAASC,cAAc,gBAC7BC,UAAY,6CAAiDjD,IAAIkD,QAAQC,MAAQ,sDAA0DnD,IAAIkD,QAAQE,UAAY,sBAUjL/D,IAAK,oBACLrB,MAAO,WACH+B,OAAOC,IAAIC,IAAIS,GAAG,UAAW,WAGrBX,OAAOC,IAAIqD,aAAaC,wBAGxBvD,OAAOC,IAAIqD,aAAaE,eAGxB,IAAIX,EAAS3E,QAAQ8B,OAAOC,IAAIwD,QAAQlD,mBAWpDjB,IAAK,qBACLrB,MAAO,WACqB+E,SAASC,cAAc,YAC7BS,iBAAiB,QAAS,SAAU9G,GAClD,IACI,IAAIoC,EAASpC,EAAEoC,OACX2E,EAAY3E,EAAO4E,aAAa,YACpC,IAAKD,EAAW,CACZ,IACIE,EADM7E,EAAO8E,WACAF,aAAa,YAC1BC,IACAF,EAAYE,GAGpB,GAAIF,EAAW,CACX,IAAIb,EAAc5E,QAAQyF,GAE1B3D,OAAOC,IAAIqD,aAAaC,uBAAwB,EAEhD,IAAIQ,EAAUf,SAASC,cAAc,cACjCe,EAAehB,SAASC,cAAc,mCACtC/C,EAAM8C,SAASC,cAAc,YAC7BgB,EAAUjE,OAAOC,IAAIC,IAAIgE,UAAY,EAEzCH,EAAQI,UAAUC,OAAO,QAEzBJ,EAAaG,UAAUE,IAAI,6BAC3BnE,EAAIiE,UAAUE,IAAI,iCAElBrE,OAAOC,IAAIqE,SAASC,cAAgBvE,OAAOC,IAAIC,IAAIsE,YAEnD,IAAIC,EAAQzE,OAAOC,IAAIqD,aAAalB,IAAIuB,GAGxC3D,OAAOC,IAAIC,IAAIU,OACXE,MAAO,IACPf,KAAMkE,EACNpD,QAAS4D,EAAMC,QAAQC,UAAWF,EAAMC,QAAQE,YAGpD,IAAIC,EAAOC,YAAY,WACnB,IAAK9E,OAAOC,IAAIC,IAAI6E,WAAY,CAC5BC,cAAcH,GAGd,IAAK,IAFDI,EAAYjC,SAASC,cAAc,gBACnCiC,EAAmB,GACd7H,EAAI,EAAGA,EAAIoH,EAAMC,QAAQS,MAAO9H,IACrC6H,GAAoB,uGAExBD,EAAU/B,UAAY,qCAAuCuB,EAAMC,QAAQO,UAAY,4DAAgEjF,OAAOC,IAAIkD,QAAQE,UAAY,yHAA+H6B,EAAmB,+EACxUD,EAAUd,UAAUC,OAAO,QAC3Ba,EAAU7D,MAAMgE,QAAU,EAC1BH,EAAU7D,MAAMiE,YAAc,IAAMJ,EAAUK,YAAc,EAAI,OAErE,KAET,MAAOjH,GACLM,QAAQC,IAAIP,SAKxBiB,IAAK,uBACLrB,MAAO,WACH,IAAI+F,EAAehB,SAASC,cAAc,mCAC1Ce,EAAaN,iBAAiB,QAAS,WACnC1D,OAAOC,IAAIqD,aAAaC,uBAAwB,EAChD,IAAI0B,EAAYjC,SAASC,cAAc,gBACnCc,EAAUf,SAASC,cAAc,cACjC/C,EAAM8C,SAASC,cAAc,YAC7BgB,EAAUjE,OAAOC,IAAIC,IAAIgE,UAAY,EAGzCH,EAAQI,UAAUE,IAAI,QACtBY,EAAUd,UAAUE,IAAI,QAIxBL,EAAaG,UAAUC,OAAO,6BAC9BlE,EAAIiE,UAAUC,OAAO,iCAOrBpE,OAAOC,IAAIC,IAAIU,OAAQE,MAAO,EAAGf,KAAMkE,EAASpD,OAAQb,OAAOC,IAAIqE,SAASC,qBAIpFjF,IAAK,uBACLrB,MAAO,WACH,IAAIsH,EAAYvC,SAASC,cAAc,gBACnCuC,EAAUxC,SAASC,cAAc,oBAErCsC,EAAU7B,iBAAiB,QAAS,WAClBV,SAASC,cAAc,oBAC7B7B,MAAMqE,IAAM,SAGxBD,EAAQ9B,iBAAiB,QAAS,WAC9BhF,KAAK0C,MAAMqE,IAAM,cAIzBnG,IAAK,6BACLrB,MAAO,WACU+E,SAASC,cAAc,kBAC7BS,iBAAiB,QAAS,WAC7B,IAAIgC,EAAK1C,SAASC,cAAc,sBAChCyC,EAAGvB,UAAUE,IAAI,4BACjB,IAAInE,EAAM8C,SAASC,cAAc,YACjC/C,EAAIiE,UAAUE,IAAI,wBAClBqB,EAAGhC,iBAAiB,QAAS,WACzBgC,EAAGvB,UAAUC,OAAO,4BACpBlE,EAAIiE,UAAUC,OAAO,gCAM9BrB,EAjKE,GAoKbrF,EAAQQ,QAAU6E,IAEf4C,wBAAwB,EAAEC,2BAA2B,IAAIC,GAAG,SAASzI,EAAQU,EAAOJ,GACvF,aAEAK,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAGX,IAAIa,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAMrB,OAAQP,IAAK,CAAE,IAAI6B,EAAaD,EAAM5B,GAAI6B,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMtB,OAAOC,eAAegB,EAAQE,EAAWI,IAAKJ,IAAiB,OAAO,SAAUX,EAAagB,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBR,EAAYkB,UAAWF,GAAiBC,GAAaT,EAAiBR,EAAaiB,GAAqBjB,GAA7gB,GAIfuH,EAAQ,WACR,SAASA,EAAMpB,IAHnB,SAAyBpG,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAIxGC,CAAgBC,KAAMoH,GAEtBpH,KAAKgG,QAAUA,EACfhG,KAAKqH,wBAuET,OA9DAjH,EAAagH,IACTxG,IAAK,wBACLrB,MAAO,WAEH,IAAI+H,EAAWhD,SAASiD,cAAc,OAClCC,EAAYlD,SAASiD,cAAc,OACnCE,EAAkBnD,SAASiD,cAAc,OAG7CC,EAAUE,aAAa,WAAY1H,KAAKgG,QAAQ2B,MAChDF,EAAgBC,aAAa,WAAY1H,KAAKgG,QAAQ2B,MAGtD,IAAK,IAAIC,KAAQ5H,KAAKgG,QAClBsB,EAASI,aAAa,QAAUE,EAAM5H,KAAKgG,QAAQ4B,IAIvDJ,EAAU/B,UAAUE,IAAI,iBACxB8B,EAAgBhC,UAAUE,IAAI,eAC9B8B,EAAgBjD,UAAY,yEAC5B8C,EAAS7B,UAAUE,IAAI,QAAS,cAGhC6B,EAAUK,YAAYJ,GACtBH,EAASO,YAAYL,GAErBxH,KAAKwH,UAAYA,EAGjB,IAAIM,EAAS,IAAIxG,OAAOC,IAAIe,SAASyF,OAAOT,GAG5CQ,EAAOE,UAAU,IAAI1G,OAAOC,IAAIe,SAAS2F,OAAOjI,KAAKgG,QAAQC,UAAWjG,KAAKgG,QAAQE,WACrF4B,EAAOI,MAAM5G,OAAOC,IAAIC,QAG5BZ,IAAK,iBACLrB,MAAO,eAEPqB,IAAK,cACLrB,MAAO,SAAqB4I,GACF7D,SAASC,cAAc,0BAA4BvE,KAAKgG,QAAQ2B,KAAO,MAC7ElC,UAAUE,IAAI,QAG9B,IAAK,IADDyC,EAAY,GACPzJ,EAAI,EAAGA,EAAIqB,KAAKgG,QAAQS,MAAO9H,IACpCyJ,GAAa,+BAGjB,IAAIC,EAAmB/D,SAASiD,cAAc,OAC9Cc,EAAiB5C,UAAUE,IAAI,eAC/B0C,EAAiBX,aAAa,WAAY1H,KAAKgG,QAAQ2B,MACvDU,EAAiB7D,UAAY,2DAAgExE,KAAKgG,QAAQ2B,KAAO,KAAQQ,EAAKG,MAAMC,SAASC,OAASC,KAAKC,MAAMP,EAAKG,MAAMK,WAAa,iEAAsE3I,KAAKgG,QAAQ2B,KAAO,KAAQS,EAAY,mBAEvSpI,KAAKwH,UAAUK,YAAYQ,GAE3BpI,QAAQC,IAAI,aACZD,QAAQ2I,IAAIT,OAIbf,EA5EC,GA+EZpI,EAAQQ,QAAU4H,OAEZyB,GAAG,SAASnK,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAGX,IAAIa,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAMrB,OAAQP,IAAK,CAAE,IAAI6B,EAAaD,EAAM5B,GAAI6B,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMtB,OAAOC,eAAegB,EAAQE,EAAWI,IAAKJ,IAAiB,OAAO,SAAUX,EAAagB,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBR,EAAYkB,UAAWF,GAAiBC,GAAaT,EAAiBR,EAAaiB,GAAqBjB,GAA7gB,GAIfiJ,EAEJ,SAAgC7E,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,GAAQzE,QAASyE,GAF9DD,CAFDtF,EAAQ,wBAkB5BqK,EAAe,WAKf,SAASA,KAjBb,SAAyBnJ,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAkBxGC,CAAgBC,KAAM+I,GAEtB/I,KAAK6E,uBAAwB,EAC7B7E,KAAKgJ,0BAyFT,OA9EA5I,EAAa2I,IACTnI,IAAK,eACLrB,MAAO,WACH,IAAI0J,EAAS3H,OAAOC,IAAIwD,QAAQlD,YAC5BqH,EAAQD,EAAOrH,GAAGT,IAClBgI,EAAQF,EAAOrH,GAAGwH,IAClBC,EAAQJ,EAAOlH,GAAGZ,IAClBmI,EAAQL,EAAOlH,GAAGqH,IACtB,IAAK,IAAIzB,KAAQ3H,KAAKgJ,uBAAwB,CAC1C,IAAI7H,EAAMnB,KAAKgJ,uBAAuBrB,GAAM3B,QAAQE,SAChD9E,EAAMpB,KAAKgJ,uBAAuBrB,GAAM3B,QAAQC,WAChD9E,EAAM+H,GAAS/H,EAAMkI,GAASjI,EAAM+H,GAAS/H,EAAMkI,IACnDtJ,KAAKuJ,YAAY5B,OAK7B/G,IAAK,cACLrB,MAAO,SAAqBoI,GACxB,IAGI,IAAI6B,EAAOlF,SAASC,cAAc,qBAAuBoD,EAAO,MAC5D6B,GAAQA,EAAKpE,YACboE,EAAKpE,WAAWqE,YAAYD,UAIzBxJ,KAAKgJ,uBAAuBrB,GACrC,MAAO+B,GACL,IAAIZ,EAAmBtJ,QAAQ,sCAAuCkK,OAY9E9I,IAAK,MACLrB,MAAO,SAAaoI,EAAM5B,GACtB/F,KAAKgJ,uBAAuBrB,GAAQ5B,KAYxCnF,IAAK,MACLrB,MAAO,SAAaoI,GAChB,OAAO3H,KAAKgJ,uBAAuBrB,MAcvC/G,IAAK,SACLrB,MAAO,SAAgBoI,GACnB,QAAO3H,KAAKgJ,uBAAuBrB,OAIpCoB,EAlGQ,GAqGnB/J,EAAQQ,QAAUuJ,IAEfY,sBAAsB,IAAIC,GAAG,SAASlL,EAAQU,EAAOJ,GACxD,aAEAK,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAGX,IAAIa,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAMrB,OAAQP,IAAK,CAAE,IAAI6B,EAAaD,EAAM5B,GAAI6B,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMtB,OAAOC,eAAegB,EAAQE,EAAWI,IAAKJ,IAAiB,OAAO,SAAUX,EAAagB,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBR,EAAYkB,UAAWF,GAAiBC,GAAaT,EAAiBR,EAAaiB,GAAqBjB,GAA7gB,GAIfgK,EAAc,WACd,SAASA,EAAYlC,IAHzB,SAAyB/H,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAIxGC,CAAgBC,KAAM6J,GAEtB7J,KAAK2H,KAAOA,EACZ3H,KAAK8J,8BA4ET,OAzEA1J,EAAayJ,IACTjJ,IAAK,kBACLrB,MAAO,WACH,IAAIwK,EAAczF,SAASC,cAAc,kBACrCyF,EAAY1F,SAASC,cAAc,eACvCwF,EAAYtE,UAAUC,OAAO,QAC7BsE,EAAUvE,UAAUE,IAAI,WAG5B/E,IAAK,kBACLrB,MAAO,WACH,IAAIwK,EAAczF,SAASC,cAAc,kBACrCyF,EAAY1F,SAASC,cAAc,eACvCwF,EAAYtE,UAAUE,IAAI,QAC1BqE,EAAUvE,UAAUC,OAAO,WAG/B9E,IAAK,kBACLrB,MAAO,SAAyBuD,GAC5B9C,KAAKiK,kBAEL,IAAI7B,EAAY,GACZ8B,EAAa5F,SAASC,cAAc,sBACpC4F,EAAa7F,SAASC,cAAc,sBACpC6F,EAAa9F,SAASC,cAAc,sBACpC8F,EAAa/F,SAASC,cAAc,sBACpC+F,EAAehG,SAASC,cAAc,wBACtCgG,EAAmBjG,SAASC,cAAc,4BAC1CiG,EAAalG,SAASC,cAAc,sBACpCkG,EAAcnG,SAASC,cAAc,uBAEzCiG,EAAW/E,UAAUC,OAAO,QAE5B,IAAK,IAAI/G,EAAI,EAAGA,EAAImE,EAAK4H,KAAKjE,MAAO9H,IACjCyJ,GAAa,qCAGbtF,EAAK6H,OAAS7H,EAAK6H,MAAMC,WACzBT,EAAW3F,UAAY1B,EAAK6H,MAAMC,UAClCH,EAAYhF,UAAUC,OAAO,SAE7B+E,EAAYhF,UAAUE,IAAI,QAG9BuE,EAAWxH,MAAMmI,gBAAkB,aAAe/H,EAAKgI,OAAOC,QAAQC,WAAa,IACnFZ,EAAW5F,UAAY1B,EAAK4H,KAAKnE,UACjC8D,EAAW7F,UAAY4D,EACvBkC,EAAa9F,UAAY1B,EAAK4H,KAAKO,SACnCV,EAAiB/F,UAAY1B,EAAKoI,eAGtCtK,IAAK,8BACLrB,MAAO,WACH,IAAI4L,EAAQnL,KAEZA,KAAKoL,kBAEL,IAAItI,EAAOC,KAAKC,WAAY2E,KAAQ3H,KAAK2H,OACzCtE,MAAM,WAAa/B,OAAOC,IAAI4B,OAAS,sDAAwDL,GAAMQ,KAAK,SAAUC,GAChH,IAAIC,EAAcD,EAASE,QAAQC,IAAI,gBACvC,GAAIF,GAAeA,EAAYG,SAAS,oBACpC,OAAOJ,EAASK,OAEpB,MAAM,IAAI9D,UAAU,gCACrBwD,KAAK,SAAUM,GACd3D,QAAQ2I,IAAIhF,GACZuH,EAAME,gBAAgBzH,KACvBC,MAAM,SAAUC,GACf7D,QAAQC,IAAI4D,SAKjB+F,EAjFO,GAoFlB7K,EAAQQ,QAAUqK,OAEZyB,GAAG,SAAS5M,EAAQU,EAAOJ,GACjC,aAEAK,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAGX,IAAIa,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAMrB,OAAQP,IAAK,CAAE,IAAI6B,EAAaD,EAAM5B,GAAI6B,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMtB,OAAOC,eAAegB,EAAQE,EAAWI,IAAKJ,IAAiB,OAAO,SAAUX,EAAagB,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBR,EAAYkB,UAAWF,GAAiBC,GAAaT,EAAiBR,EAAaiB,GAAqBjB,GAA7gB,GAIf0L,EAAQ,WASR,SAASA,EAAMC,IAXnB,SAAyB5L,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAYxGC,CAAgBC,KAAMuL,GAEtBvL,KAAKwL,MAAQA,EACbxL,KAAKyL,mBA0ET,OAvEArL,EAAamL,IACT3K,IAAK,mBACLrB,MAAO,WACH,IAAK,IAAInB,KAAK4B,KAAKwL,MACf,GAAIxL,KAAKwL,MAAMpN,GAAGc,OAAS,EACvBe,QAAQC,IAAI,kBAAoB9B,EAAI,KAAO4B,KAAKwL,MAAMpN,IACtD4B,KAAK0L,mBAAmBnK,IAAIkD,QAAQkH,SAAU3L,KAAKwL,MAAMpN,QACtD,CAGH,IAAK,IAFDwN,EAAQ,EACRC,KACKC,EAAI,EAAGA,EAAI9L,KAAKwL,MAAMpN,GAAGc,OAAQ4M,IACtCF,IACAC,EAAIE,KAAK/L,KAAKwL,MAAMpN,GAAG0N,IACnBF,EAAQ,IACR3L,QAAQC,IAAI,oBAAsB9B,EAAI,KAAOyN,GAC7C7L,KAAK0L,mBAAmBnK,IAAIkD,QAAQkH,SAAUE,GAC9CD,EAAQ,EACRC,MAGJA,EAAI3M,OAAS,IACbe,QAAQC,IAAI,mBAAqB9B,EAAI,KAAOyN,GAC5C7L,KAAK0L,mBAAmBnK,IAAIkD,QAAQkH,SAAUE,QAa9DjL,IAAK,qBACLrB,MAAO,SAA4BsD,EAAOmJ,GACtC,IAAIlJ,EAAOC,KAAKC,WAAYC,GAAMJ,EAAO8E,KAAQqE,IACjD3I,MAAM,WAAa/B,OAAOC,IAAI4B,OAAS,iDAAmDL,GAAMQ,KAAK,SAAUC,GAC3G,IAAIC,EAAcD,EAASE,QAAQC,IAAI,gBACvC,GAAIF,GAAeA,EAAYG,SAAS,oBACpC,OAAOJ,EAASK,OAEpB,MAAM,IAAI9D,UAAU,gCACrBwD,KAAK,SAAUM,GACd,IAAIqI,EAASrI,EAAKsI,SAAWtI,EAAKsI,QAAQC,sBAAwBvI,EAAKsI,QAAQC,qBAAqBC,QAAQlN,OACxGA,EAAS0E,EAAKsI,QAAQC,qBAAqBC,QAAQlN,OACvD,GAAI+M,EAEA,IAAK,IADDnF,EAAUlD,EAAKsI,QAAQC,qBAAqBC,QACvCzN,EAAI,EAAGA,EAAIO,EAAQP,IACxB,GAAwC,GAApCmI,EAAQnI,GAAG0N,UAAUC,YAAqB,CAC1C,IAAIvG,EAAQzE,OAAOC,IAAIqD,aAAalB,IAAIoD,EAAQnI,GAAG0N,UAAUE,MACzDxG,GACAA,EAAMyG,oBAEP,CACHvM,QAAQC,IAAI,IAAMvB,EAAI,gBACtBsB,QAAQ2I,IAAI9B,EAAQnI,IACpB,IAAI8N,EAASnL,OAAOC,IAAIqD,aAAalB,IAAIoD,EAAQnI,GAAG0N,UAAUE,MAC1DE,GACAA,EAAOC,YAAY5F,EAAQnI,GAAGgO,MAAM,OAKrD9I,MAAM,SAAUC,GACf7D,QAAQC,IAAI4D,SAKjByH,EAvFC,GA0FZvM,EAAQQ,QAAU+L,OAEZqB,GAAG,SAASlO,EAAQU,EAAOJ,GACjC,aAgBA,SAASgF,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,GAAQzE,QAASyE,GAdvF5E,OAAOC,eAAeN,EAAS,cAC3BO,OAAO,IAGX,IAAIa,EAAe,WAAc,SAASC,EAAiBC,EAAQC,GAAS,IAAK,IAAI5B,EAAI,EAAGA,EAAI4B,EAAMrB,OAAQP,IAAK,CAAE,IAAI6B,EAAaD,EAAM5B,GAAI6B,EAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,UAAWF,IAAYA,EAAWG,UAAW,GAAMtB,OAAOC,eAAegB,EAAQE,EAAWI,IAAKJ,IAAiB,OAAO,SAAUX,EAAagB,EAAYC,GAAiJ,OAA9HD,GAAYR,EAAiBR,EAAYkB,UAAWF,GAAiBC,GAAaT,EAAiBR,EAAaiB,GAAqBjB,GAA7gB,GAIfgN,EAAU7I,EAFDtF,EAAQ,aAMjBoO,EAAU9I,EAFDtF,EAAQ,YAQjBqO,EAAS,WACT,SAASA,EAAO9D,IAHpB,SAAyBrJ,EAAUC,GAAe,KAAMD,aAAoBC,GAAgB,MAAM,IAAIC,UAAU,qCAIxGC,CAAgBC,KAAM+M,GAEtB/M,KAAKiJ,OAASA,EACdjJ,KAAKgN,WACLhN,KAAKiN,YAiDT,OA9CA7M,EAAa2M,IACTnM,IAAK,cACLrB,MAAO,SAAqBoI,EAAMuF,GACzBlN,KAAKgN,QAAQE,KACdlN,KAAKgN,QAAQE,OAEjBlN,KAAKgN,QAAQE,GAAQnB,KAAKpE,MAQ9B/G,IAAK,YACLrB,MAAO,WACH,IAAI4L,EAAQnL,KAER8C,EAAOC,KAAKC,UAAUhD,KAAKiJ,QAC/B5F,MAAM,WAAa/B,OAAOC,IAAI4B,OAAS,iDAAmDL,GAAMQ,KAAK,SAAUC,GAC3G,IAAIC,EAAcD,EAASE,QAAQC,IAAI,gBACvC,GAAIF,GAAeA,EAAYG,SAAS,oBACpC,OAAOJ,EAASK,OAEpB,MAAM,IAAI9D,UAAU,gCACrBwD,KAAK,SAAUM,GAEd,GAAIA,EAAK1E,OAAS,EAAG,CACjB,IAAK,IAAIP,EAAI,EAAGA,EAAIiF,EAAK1E,OAAQP,IACxB2C,OAAOC,IAAIqD,aAAauI,OAAOvJ,EAAKjF,GAAGgJ,MAIxC1H,QAAQC,IAAI,WAHZiL,EAAMiC,YAAYxJ,EAAKjF,GAAGgJ,KAAM/D,EAAKjF,GAAGuO,QACxC5L,OAAOC,IAAIqD,aAAae,IAAI/B,EAAKjF,GAAGgJ,KAAM,IAAIkF,EAAQrN,QAAQoE,EAAKjF,MAO3E,IAAImO,EAAQtN,QAAQ2L,EAAM6B,YAE/BnJ,MAAM,SAAUC,GACf7D,QAAQC,IAAI4D,SAKjBiJ,EAvDE,GA0Db/N,EAAQQ,QAAUuN,IAEfM,WAAW,EAAEC,UAAU,IAAIC,IAAI,SAAS7O,EAAQU,EAAOJ,GAC1D,aAwBA,SAASgF,EAAuBC,GAAO,OAAOA,GAAOA,EAAIC,WAAaD,GAAQzE,QAASyE,GAYvF,SAASuJ,EAAaC,GAElB,OADaA,EAAOC,MAAMD,EAAOE,QAAQ,KAAO,GAAGC,MAAM,KAC3CC,OAAO,SAAUC,EAAQC,GACnC,IAAIC,EAAcD,EAAKH,MAAM,KACzBK,EAAeC,EAAeF,EAAa,GAC3CpN,EAAMqN,EAAa,GACnBE,EAAMF,EAAa,GAEvB,OAAO5O,OAAO+O,OAAON,EAlB7B,SAAyB7J,EAAKrD,EAAKrB,GAAiK,OAApJqB,KAAOqD,EAAO5E,OAAOC,eAAe2E,EAAKrD,GAAOrB,MAAOA,EAAOkB,YAAY,EAAMC,cAAc,EAAMC,UAAU,IAAkBsD,EAAIrD,GAAOrB,EAAgB0E,EAkBtKoK,IAAoBzN,EAAK0N,mBAAmBH,UA1CjF,IAAID,EAAiB,WAAwZ,OAAO,SAAUK,EAAK5P,GAAK,GAAI6P,MAAMC,QAAQF,GAAQ,OAAOA,EAAY,GAAI/F,OAAOkG,YAAYrP,OAAOkP,GAAQ,OAAxf,SAAuBA,EAAK5P,GAAK,IAAIgQ,KAAeC,GAAK,EAAUC,GAAK,EAAWC,OAAKC,EAAW,IAAM,IAAK,IAAiCC,EAA7BC,EAAKV,EAAI/F,OAAOkG,cAAmBE,GAAMI,EAAKC,EAAGC,QAAQC,QAAoBR,EAAK5C,KAAKiD,EAAGzP,QAAYZ,GAAKgQ,EAAKzP,SAAWP,GAA3DiQ,GAAK,IAAoE,MAAOQ,GAAOP,GAAK,EAAMC,EAAKM,EAAO,QAAU,KAAWR,GAAMK,EAAW,QAAGA,EAAW,SAAO,QAAU,GAAIJ,EAAI,MAAMC,GAAQ,OAAOH,EAA6HU,CAAcd,EAAK5P,GAAa,MAAM,IAAImB,UAAU,yDAAjkB,GAIjBwP,EAAWtL,EAFDtF,EAAQ,oCAMlB6Q,EAAYvL,EAFDtF,EAAQ,uBAMnB8Q,EAAiBxL,EAFDtF,EAAQ,mCAMxB+Q,EAAWzL,EAFDtF,EAAQ,6BAMGsF,EAFDtF,EAAQ,gCAWhC4C,OAAOC,KACH4B,OAAQ,MACRyC,aAiBJtE,OAAO0D,iBAAiB,mBAAoB,WACxC,IAAI0K,EAAalC,EAAalM,OAAOqO,SAASC,MAEzCF,EAAWzM,GAOhB1B,IAAIqD,aAAe,IAAI4K,EAAehQ,QACtC+B,IAAIsO,OAAS,IAAIP,EAAS9P,QAAQkQ,EAAWzM,IAC7C1B,IAAIsO,OAAOC,kBAAkB,SAAUrL,GAKnClD,IAAIkD,QAAUA,EACdlD,IAAIe,SAAWA,SACff,IAAIwD,QAAU,IAAIwK,EAAU/P,QAAQ,UAAW,mEAAoEiF,EAAQsL,aAActL,EAAQuL,cAAevL,EAAQwL,UAKxKR,EAASjQ,QAAQ0Q,aACjBT,EAASjQ,QAAQ2Q,oBACjBV,EAASjQ,QAAQ4Q,uBACjBX,EAASjQ,QAAQ6Q,6BACjBZ,EAASjQ,QAAQ8Q,uBACjBb,EAASjQ,QAAQ+Q,2BAItBC,8BAA8B,EAAEC,qBAAqB,EAAEC,kCAAkC,EAAEC,2BAA2B,EAAEC,iCAAiC,SAAS","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ExceptionManager = function ExceptionManager(message, exception) {\n    _classCallCheck(this, ExceptionManager);\n\n    console.log(\"HotelMap: \" + message);\n    console.log(exception);\n};\n\nexports.default = ExceptionManager;\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * HotelMap - Copyright (C) 2017 HotelMap\n * ============================================================================\n * Filename: Mapping.js\n * Author: James Holden\n * ============================================================================\n * This class handles the generation and processing of the map view within\n * the HotelMap application.\n *\n */\nvar Mapping = function () {\n    function Mapping(nodeID, mapStyling, lat, lon, zoom) {\n        _classCallCheck(this, Mapping);\n\n        // Variable declaration.\n        window.sys.map = null;\n        this.mapboxKey = \"pk.eyJ1Ijoic2NvdHRiZXJ3aWNrbG9uZG9udG93biIsImEiOiJjMVFnelBzIn0.jDehcQpMLsuwgNQP2Hafgg\";\n        this.mapStyling = mapStyling;\n        this.nodeID = nodeID;\n        this.lat = lat;\n        this.lon = lon;\n        this.zoom = zoom;\n\n        // Function runners.\n        this.initialiseMapView();\n        this.delayedFlyTo();\n    }\n\n    _createClass(Mapping, [{\n        key: \"getBounds\",\n        value: function getBounds() {\n            var bounds_a = window.sys.map.getBounds().getSouthWest();\n            var bounds_b = window.sys.map.getBounds().getNorthEast();\n\n            return {\n                \"sw\": bounds_a,\n                \"ne\": bounds_b\n            };\n        }\n    }, {\n        key: \"delayedFlyTo\",\n        value: function delayedFlyTo() {\n            var lat = this.lat;\n            var lon = this.lon;\n            var zoom = this.zoom;\n            window.sys.map.on('load', function () {\n                this.flyTo({\n                    center: [lon, lat],\n                    zoom: zoom,\n                    pitch: 1,\n                    bearing: 1 // bearing in degrees\n                });\n            });\n        }\n\n        /**\n         *\n         */\n\n    }, {\n        key: \"initialiseMapView\",\n        value: function initialiseMapView() {\n            window.sys.mapboxgl.accessToken = this.mapboxKey;\n            window.sys.map = new window.sys.mapboxgl.Map({\n                container: this.nodeID,\n                style: this.mapStyling,\n                center: [this.lon, this.lat],\n                pitch: 100, // pitch in degrees\n                bearing: -60, // bearing in degrees\n                zoom: this.zoom - 7\n            });\n        }\n    }]);\n\n    return Mapping;\n}();\n\nexports.default = Mapping;\n\n},{}],3:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * HotelMap - Copyright (C) 2017 HotelMap\n * ============================================================================\n * Filename: Loader.js\n * Author: James Holden\n * ============================================================================\n * Processes the initial configuration loading for data relevant to this map\n * request.\n *\n */\nvar Loader = function () {\n    /**\n     * Defines the URL and mapid we want to load in.\n     *\n     * @param <Int> mapid\n     */\n    function Loader(mapid) {\n        _classCallCheck(this, Loader);\n\n        var data = JSON.stringify({ \"id\": mapid });\n        this.uri = \"https://\" + window.sys.domain + \".hotelmap.com/provider/index?mode=config&data=\" + data;\n    }\n\n    /**\n     * Loads the remote configuration file for the event in question.\n     * Returns a data set which we can use for building the map.\n     *\n     * @param <function>\n     */\n\n\n    _createClass(Loader, [{\n        key: \"loadConfiguration\",\n        value: function loadConfiguration(func) {\n            fetch(this.uri).then(function (response) {\n                var contentType = response.headers.get(\"content-type\");\n                if (contentType && contentType.includes(\"application/json\")) {\n                    return response.json();\n                }\n                throw new TypeError(\"Oops, we haven't got JSON!\");\n            }).then(function (json) {\n                func(json);\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n    }]);\n\n    return Loader;\n}();\n\nexports.default = Loader;\n\n},{}],4:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Search = require(\"../hotels/helpers/Search\");\n\nvar _Search2 = _interopRequireDefault(_Search);\n\nvar _Information = require(\"../hotels/Information\");\n\nvar _Information2 = _interopRequireDefault(_Information);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Events = function () {\n    function Events() {\n        _classCallCheck(this, Events);\n    }\n\n    _createClass(Events, null, [{\n        key: \"fillHeader\",\n        value: function fillHeader() {\n            var mainTitle = document.querySelector(\".main--title\");\n            mainTitle.innerHTML = \"\\n            <div class=\\\"heading--title\\\">\" + sys.mapdata.title + \"</div>\\n            <div class=\\\"heading--subtitle\\\">\" + sys.mapdata.sub_title + \"</div>\\n        \";\n        }\n\n        /**\n         * Attachs the moveend map event to a hotel finder process which will\n         * search for new hotels in the defined bounds of the screen\n         * This should be moved to an Events class..\n         */\n\n    }, {\n        key: \"attachHotelLoader\",\n        value: function attachHotelLoader() {\n            window.sys.map.on('moveend', function () {\n                //\n                // Can we run a search for new hotels?\n                if (window.sys.hotelFactory.allowHotelSearchToRun) {\n                    //\n                    // Clean up what we don't need now.\n                    window.sys.hotelFactory.cleanFactory();\n                    //\n                    // Define the bounds and lets look for new hotels.\n                    new _Search2.default(window.sys.mapping.getBounds());\n                }\n            });\n        }\n\n        /**\n         * Adds the event handler for the hotel click. This is probably one of\n         * the most complicated event routines.\n         */\n\n    }, {\n        key: \"addHotelClickEvent\",\n        value: function addHotelClickEvent() {\n            var mapping_container = document.querySelector(\".mapping\");\n            mapping_container.addEventListener(\"click\", function (e) {\n                try {\n                    var target = e.target;\n                    var reference = target.getAttribute(\"data-key\");\n                    if (!reference) {\n                        var tmp = target.parentNode;\n                        var tmpref = tmp.getAttribute(\"data-key\");\n                        if (tmpref) {\n                            reference = tmpref;\n                        }\n                    }\n                    if (reference) {\n                        new _Information2.default(reference);\n                        /* Prevent hotels from being loaded in this view */\n                        window.sys.hotelFactory.allowHotelSearchToRun = false;\n                        /* Prepare the variables */\n                        var greysky = document.querySelector(\".grey--sky\");\n                        var rightblockui = document.querySelector(\".ui-item-rightblock-hotels-list\");\n                        var map = document.querySelector(\".mapping\");\n                        var newzoom = window.sys.map.getZoom() + 1;\n                        /* Remove Grey sky.. */\n                        greysky.classList.remove(\"hide\");\n                        /* Manipulate classes */\n                        rightblockui.classList.add(\"transform-active-right-ui\");\n                        map.classList.add(\"map-negative-transform-active\");\n                        /* Lets record our current lat/lon */\n                        window.sys.settings.currentLatLon = window.sys.map.getCenter();\n                        /* Lets get a record of the hotel information */\n                        var hotel = window.sys.hotelFactory.get(reference);\n\n                        /* Change the view of the ma p */\n                        window.sys.map.flyTo({\n                            pitch: 100,\n                            zoom: newzoom,\n                            center: [hotel.dataset.longitude, hotel.dataset.latitude]\n                        });\n\n                        var wait = setInterval(function () {\n                            if (!window.sys.map.isMoving()) {\n                                clearInterval(wait);\n                                var hotelName = document.querySelector(\".hotel--name\");\n                                var starRatingString = \"\";\n                                for (var i = 0; i < hotel.dataset.stars; i++) {\n                                    starRatingString += \"\\n                                    <li class=\\\"fa fa-star\\\"></li>\\n                                \";\n                                }\n                                hotelName.innerHTML = \"\\n                                \" + hotel.dataset.hotelName + \"\\n                                <div class=\\\"sub_title\\\">\" + window.sys.mapdata.sub_title + \"</div>\\n                                <div class=\\\"ratings\\\">\\n                                    <div class=\\\"stars\\\">\" + starRatingString + \"</div>\\n                                </div>\\n                            \";\n                                hotelName.classList.remove(\"hide\");\n                                hotelName.style.opacity = 1;\n                                hotelName.style.marginLeft = -200 - hotelName.offsetWidth / 2 + 'px';\n                            }\n                        }, 50);\n                    }\n                } catch (exception) {\n                    console.log(exception);\n                }\n            });\n        }\n    }, {\n        key: \"addRightUICloseEvent\",\n        value: function addRightUICloseEvent() {\n            var rightblockui = document.querySelector(\".ui-item-rightblock-hotels-list\");\n            rightblockui.addEventListener(\"click\", function () {\n                window.sys.hotelFactory.allowHotelSearchToRun = true;\n                var hotelName = document.querySelector(\".hotel--name\");\n                var greysky = document.querySelector(\".grey--sky\");\n                var map = document.querySelector(\".mapping\");\n                var newzoom = window.sys.map.getZoom() - 1;\n                //\n                // Overlay Dark\n                greysky.classList.add(\"hide\");\n                hotelName.classList.add(\"hide\");\n\n                //\n                // Move the right side UI in and the map slightly.\n                rightblockui.classList.remove(\"transform-active-right-ui\");\n                map.classList.remove(\"map-negative-transform-active\");\n\n                //console.dir(window.sys.settings.currentLatLon);\n\n\n                //\n                // Fly the map in by 1 & pitched.\n                window.sys.map.flyTo({ pitch: 1, zoom: newzoom, center: window.sys.settings.currentLatLon });\n            });\n        }\n    }, {\n        key: \"addSearchResultsView\",\n        value: function addSearchResultsView() {\n            var searchbar = document.querySelector(\".search--bar\");\n            var results = document.querySelector(\".search--results\");\n\n            searchbar.addEventListener(\"click\", function () {\n                var results = document.querySelector(\".search--results\");\n                results.style.top = '65px';\n            });\n\n            results.addEventListener(\"click\", function () {\n                this.style.top = '-500px';\n            });\n        }\n    }, {\n        key: \"addSettingsOpenButtonEvent\",\n        value: function addSettingsOpenButtonEvent() {\n            var button = document.querySelector(\".main--buttons\");\n            button.addEventListener(\"click\", function () {\n                var ui = document.querySelector(\".ui-item-leftblock\");\n                ui.classList.add(\"transform-active-left-ui\");\n                var map = document.querySelector(\".mapping\");\n                map.classList.add(\"map-transform-active\");\n                ui.addEventListener(\"click\", function () {\n                    ui.classList.remove(\"transform-active-left-ui\");\n                    map.classList.remove(\"map-transform-active\");\n                });\n            });\n        }\n    }]);\n\n    return Events;\n}();\n\nexports.default = Events;\n\n},{\"../hotels/Information\":7,\"../hotels/helpers/Search\":9}],5:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Hotel = function () {\n    function Hotel(dataset) {\n        _classCallCheck(this, Hotel);\n\n        this.dataset = dataset;\n        this.generateBaseHotelIcon();\n    }\n\n    /**\n     * Generates the base icon we need to push to the map\n     *\n     */\n\n\n    _createClass(Hotel, [{\n        key: \"generateBaseHotelIcon\",\n        value: function generateBaseHotelIcon() {\n            // Base Notes.\n            var baseIcon = document.createElement(\"div\");\n            var hotelIcon = document.createElement(\"div\");\n            var hotelSpinSearch = document.createElement(\"div\");\n\n            // Bind data keys.\n            hotelIcon.setAttribute(\"data-key\", this.dataset.hmid);\n            hotelSpinSearch.setAttribute(\"data-key\", this.dataset.hmid);\n\n            // Data Attributes.\n            for (var name in this.dataset) {\n                baseIcon.setAttribute(\"data-\" + name, this.dataset[name]);\n            }\n\n            // Node Styling.\n            hotelIcon.classList.add(\"hotel--medium\");\n            hotelSpinSearch.classList.add(\"hotel--spin\");\n            hotelSpinSearch.innerHTML = \"\\n            <li class=\\\"fa fa-spin fa-circle-o-notch\\\"></li>\\n        \";\n            baseIcon.classList.add(\"hotel\", \"hotel-base\");\n\n            // Organisation\n            hotelIcon.appendChild(hotelSpinSearch);\n            baseIcon.appendChild(hotelIcon);\n\n            this.hotelIcon = hotelIcon;\n\n            // Add marker to map\n            var marker = new window.sys.mapboxgl.Marker(baseIcon);\n\n            // Marker setup.\n            marker.setLngLat(new window.sys.mapboxgl.LngLat(this.dataset.longitude, this.dataset.latitude));\n            marker.addTo(window.sys.map);\n        }\n    }, {\n        key: \"addFullyBooked\",\n        value: function addFullyBooked() {}\n    }, {\n        key: \"addBaseRate\",\n        value: function addBaseRate(rate) {\n            var hotelSpinSearch = document.querySelector(\".hotel--spin[data-key='\" + this.dataset.hmid + \"']\");\n            hotelSpinSearch.classList.add(\"hide\");\n\n            var starsHTML = \"\";\n            for (var i = 0; i < this.dataset.stars; i++) {\n                starsHTML += \"<li class=\\\"fa fa-star\\\"></li>\";\n            }\n\n            var hotelRateElement = document.createElement(\"div\");\n            hotelRateElement.classList.add(\"hotel--rate\");\n            hotelRateElement.setAttribute(\"data-key\", this.dataset.hmid);\n            hotelRateElement.innerHTML = \"\\n            <div class=\\\"hotel--rate--value\\\" data-key=\\\"\" + this.dataset.hmid + \"\\\">\" + rate.Price.Currency.Symbol + Math.floor(rate.Price.OfferRate) + \"</div>\\n            <div class=\\\"hotel--rate--stars\\\" data-key=\\\"\" + this.dataset.hmid + \"\\\">\" + starsHTML + \"</div>\\n        \";\n\n            this.hotelIcon.appendChild(hotelRateElement);\n\n            console.log(\"New Rate!\");\n            console.dir(rate);\n        }\n    }]);\n\n    return Hotel;\n}();\n\nexports.default = Hotel;\n\n},{}],6:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _ExceptionManager = require(\"../ExceptionManager\");\n\nvar _ExceptionManager2 = _interopRequireDefault(_ExceptionManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * HotelMap - Copyright (C) 2017 HotelMap\n * ============================================================================\n * Filename: HotelFactory.js\n * Author: James Holden\n * ============================================================================\n * Responsible for spawning new hotel finder services and stoing the resulting\n * hotel points found.\n *\n */\nvar HotelFactory = function () {\n    /**\n     * Defines the ability to search for hotels and also sets up the\n     * factory store point for Hotel Objects\n     */\n    function HotelFactory() {\n        _classCallCheck(this, HotelFactory);\n\n        this.allowHotelSearchToRun = true;\n        this.hotelFactoryCollection = {};\n    }\n\n    /**\n     * Cleans the factory store of hotel objects which are out of view\n     * and haven't been referenced for some time.  Keeps the memory use\n     * lower.  Additionally, we store rate profiles seperately thus we would\n     * be able to re-load the hotel into view and use the cached rate.\n     */\n\n\n    _createClass(HotelFactory, [{\n        key: \"cleanFactory\",\n        value: function cleanFactory() {\n            var bounds = window.sys.mapping.getBounds();\n            var milat = bounds.sw.lat;\n            var milon = bounds.sw.lng;\n            var malat = bounds.ne.lat;\n            var malon = bounds.ne.lng;\n            for (var hmid in this.hotelFactoryCollection) {\n                var lat = this.hotelFactoryCollection[hmid].dataset.latitude;\n                var lon = this.hotelFactoryCollection[hmid].dataset.longitude;\n                if (lat < milat || lat > malat || lon < milon || lon > malon) {\n                    this.deleteHotel(hmid);\n                }\n            }\n        }\n    }, {\n        key: \"deleteHotel\",\n        value: function deleteHotel(hmid) {\n            try {\n                //\n                // Remove the node from the DOM.\n                var node = document.querySelector(\".hotel[data-hmid='\" + hmid + \"']\");\n                if (node && node.parentNode) {\n                    node.parentNode.removeChild(node);\n                }\n                //\n                // Remove the Hotel Reference\n                delete this.hotelFactoryCollection[hmid];\n            } catch (hotelRemovalException) {\n                new _ExceptionManager2.default(\"Unable to remove hotel from process\", hotelRemovalException);\n            }\n        }\n\n        /**\n         * Adds a new hotel entity into the factory collection.\n         *\n         * @param <int> hmid\n         * @param <Hotel> hotel\n         */\n\n    }, {\n        key: \"add\",\n        value: function add(hmid, hotel) {\n            this.hotelFactoryCollection[hmid] = hotel;\n        }\n\n        /**\n         * Returns a hotel object which references a specific hotel by hmid\n         *\n         * @param <int> hmid\n         *\n         * @return <Hotel> hotel\n         */\n\n    }, {\n        key: \"get\",\n        value: function get(hmid) {\n            return this.hotelFactoryCollection[hmid];\n        }\n\n        /**\n         * Determines if a hotel already exists, thus any returned hotels from\n         * the finder service will not be processed (duplication) if it already\n         * exists.  It can exist as a visible or hidden element\n         *\n         * @param <int> hmid\n         *\n         * @return <bool>\n         */\n\n    }, {\n        key: \"exists\",\n        value: function exists(hmid) {\n            return this.hotelFactoryCollection[hmid] ? true : false;\n        }\n    }]);\n\n    return HotelFactory;\n}();\n\nexports.default = HotelFactory;\n\n},{\"../ExceptionManager\":1}],7:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Information = function () {\n    function Information(hmid) {\n        _classCallCheck(this, Information);\n\n        this.hmid = hmid;\n        this.loadExtendedHoteInformation();\n    }\n\n    _createClass(Information, [{\n        key: \"showLoadingView\",\n        value: function showLoadingView() {\n            var hotelLoader = document.querySelector(\".hotel-loading\");\n            var hotelInfo = document.querySelector(\".hotel-info\");\n            hotelLoader.classList.remove(\"hide\");\n            hotelInfo.classList.add(\"hide\");\n        }\n    }, {\n        key: \"hideLoadingView\",\n        value: function hideLoadingView() {\n            var hotelLoader = document.querySelector(\".hotel-loading\");\n            var hotelInfo = document.querySelector(\".hotel-info\");\n            hotelLoader.classList.add(\"hide\");\n            hotelInfo.classList.remove(\"hide\");\n        }\n    }, {\n        key: \"attachDataToDOM\",\n        value: function attachDataToDOM(data) {\n            this.hideLoadingView();\n\n            var starsHTML = \"\";\n            var hotelImage = document.querySelector(\".hotel-info--image\");\n            var hotelBrand = document.querySelector(\".hotel-info--brand\");\n            var hotelTitle = document.querySelector(\".hotel-info--title\");\n            var hotelStars = document.querySelector(\".hotel-info--stars\");\n            var hotelAddress = document.querySelector(\".hotel-info--address\");\n            var hotelDescription = document.querySelector(\".hotel-info--description\");\n            var hotelRates = document.querySelector(\".hotel-info--rates\");\n            var hotelPoints = document.querySelector(\".hotel-info--points\");\n\n            hotelRates.classList.remove(\"hide\");\n\n            for (var i = 0; i < data.base.stars; i++) {\n                starsHTML += \"<li class=\\\"fa fa-star stars\\\"></li>\";\n            }\n\n            if (data.brand && data.brand.brandName) {\n                hotelBrand.innerHTML = data.brand.brandName;\n                hotelPoints.classList.remove(\"hide\");\n            } else {\n                hotelPoints.classList.add(\"hide\");\n            }\n\n            hotelImage.style.backgroundImage = \"url(https:\" + data.images.primary.LargeImage + \")\";\n            hotelTitle.innerHTML = data.base.hotelName;\n            hotelStars.innerHTML = starsHTML;\n            hotelAddress.innerHTML = data.base.address1;\n            hotelDescription.innerHTML = data.description;\n        }\n    }, {\n        key: \"loadExtendedHoteInformation\",\n        value: function loadExtendedHoteInformation() {\n            var _this = this;\n\n            this.showLoadingView();\n\n            var data = JSON.stringify({ 'hmid': this.hmid });\n            fetch(\"https://\" + window.sys.domain + \".hotelmap.com/provider/index?mode=information&data=\" + data).then(function (response) {\n                var contentType = response.headers.get(\"content-type\");\n                if (contentType && contentType.includes(\"application/json\")) {\n                    return response.json();\n                }\n                throw new TypeError(\"Oops, we haven't got JSON!\");\n            }).then(function (json) {\n                console.dir(json);\n                _this.attachDataToDOM(json);\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n    }]);\n\n    return Information;\n}();\n\nexports.default = Information;\n\n},{}],8:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Rates = function () {\n    /**\n     * Construct our Find::Helper.\n     *\n     * @param <float> latMin\n     * @param <float> lngMin\n     * @param <float> latMax\n     * @param <float> lngMax\n     */\n    function Rates(hmids) {\n        _classCallCheck(this, Rates);\n\n        this.hmids = hmids;\n        this.buildRequestSets();\n    }\n\n    _createClass(Rates, [{\n        key: \"buildRequestSets\",\n        value: function buildRequestSets() {\n            for (var n in this.hmids) {\n                if (this.hmids[n].length < 8) {\n                    console.log(\"Root: Request: \" + n + \": \" + this.hmids[n]);\n                    this.requestRateRequest(sys.mapdata.mapRefId, this.hmids[n]);\n                } else {\n                    var count = 0;\n                    var tmp = [];\n                    for (var j = 0; j < this.hmids[n].length; j++) {\n                        count++;\n                        tmp.push(this.hmids[n][j]);\n                        if (count > 5) {\n                            console.log(\"Subset: Request: \" + n + \": \" + tmp);\n                            this.requestRateRequest(sys.mapdata.mapRefId, tmp);\n                            count = 0;\n                            tmp = [];\n                        }\n                    }\n                    if (tmp.length > 0) {\n                        console.log(\"Final: Request: \" + n + \": \" + tmp);\n                        this.requestRateRequest(sys.mapdata.mapRefId, tmp);\n                    }\n                }\n            }\n        }\n\n        /**\n         * Request Service for hotels in this locale zone.\n         * Processed list will generate new Hotel() objects which are\n         * stored in the hotelFactory object.\n         */\n\n    }, {\n        key: \"requestRateRequest\",\n        value: function requestRateRequest(mapid, hotel_group) {\n            var data = JSON.stringify({ \"id\": mapid, \"hmid\": hotel_group });\n            fetch(\"https://\" + window.sys.domain + \".hotelmap.com/provider/index?mode=search&data=\" + data).then(function (response) {\n                var contentType = response.headers.get(\"content-type\");\n                if (contentType && contentType.includes(\"application/json\")) {\n                    return response.json();\n                }\n                throw new TypeError(\"Oops, we haven't got JSON!\");\n            }).then(function (json) {\n                var status = json.content && json.content.AvailabilityResponse && json.content.AvailabilityResponse.Results.length;\n                var length = json.content.AvailabilityResponse.Results.length;\n                if (status) {\n                    var results = json.content.AvailabilityResponse.Results;\n                    for (var i = 0; i < length; i++) {\n                        if (results[i].HotelInfo.FullyBooked == true) {\n                            var hotel = window.sys.hotelFactory.get(results[i].HotelInfo.HMID);\n                            if (hotel) {\n                                hotel.addFullBooked();\n                            }\n                        } else {\n                            console.log(\"(\" + i + \") Rates! ...\");\n                            console.dir(results[i]);\n                            var _hotel = window.sys.hotelFactory.get(results[i].HotelInfo.HMID);\n                            if (_hotel) {\n                                _hotel.addBaseRate(results[i].Rooms[0]);\n                            }\n                        }\n                    }\n                }\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n    }]);\n\n    return Rates;\n}();\n\nexports.default = Rates;\n\n},{}],9:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Hotel = require(\"../Hotel\");\n\nvar _Hotel2 = _interopRequireDefault(_Hotel);\n\nvar _Rates = require(\"./Rates\");\n\nvar _Rates2 = _interopRequireDefault(_Rates);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Search = function () {\n    function Search(bounds) {\n        _classCallCheck(this, Search);\n\n        this.bounds = bounds;\n        this.hmidSet = {};\n        this.runSearch();\n    }\n\n    _createClass(Search, [{\n        key: \"addBuildSet\",\n        value: function addBuildSet(hmid, feedID) {\n            if (!this.hmidSet[feedID]) {\n                this.hmidSet[feedID] = [];\n            }\n            this.hmidSet[feedID].push(hmid);\n        }\n\n        /**\n         * Fetch the local hotels to this area.\n         */\n\n    }, {\n        key: \"runSearch\",\n        value: function runSearch() {\n            var _this = this;\n\n            var data = JSON.stringify(this.bounds);\n            fetch(\"https://\" + window.sys.domain + \".hotelmap.com/provider/index?mode=hotels&data=\" + data).then(function (response) {\n                var contentType = response.headers.get(\"content-type\");\n                if (contentType && contentType.includes(\"application/json\")) {\n                    return response.json();\n                }\n                throw new TypeError(\"Oops, we haven't got JSON!\");\n            }).then(function (json) {\n\n                if (json.length > 0) {\n                    for (var i = 0; i < json.length; i++) {\n                        if (!window.sys.hotelFactory.exists(json[i].hmid)) {\n                            _this.addBuildSet(json[i].hmid, json[i].feedID);\n                            window.sys.hotelFactory.add(json[i].hmid, new _Hotel2.default(json[i]));\n                        } else {\n                            console.log(\"Bypass\");\n                        }\n                    }\n                    //\n                    // Spawn a new Rates requester.\n                    new _Rates2.default(_this.hmidSet);\n                }\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n    }]);\n\n    return Search;\n}();\n\nexports.default = Search;\n\n},{\"../Hotel\":5,\"./Rates\":8}],10:[function(require,module,exports){\n\"use strict\";\n\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar _Loader = require(\"./hotelmap/configuration/Loader\");\n\nvar _Loader2 = _interopRequireDefault(_Loader);\n\nvar _Mapping = require(\"./hotelmap/Mapping\");\n\nvar _Mapping2 = _interopRequireDefault(_Mapping);\n\nvar _HotelFactory = require(\"./hotelmap/hotels/HotelFactory\");\n\nvar _HotelFactory2 = _interopRequireDefault(_HotelFactory);\n\nvar _Events = require(\"./hotelmap/events/Events\");\n\nvar _Events2 = _interopRequireDefault(_Events);\n\nvar _ExceptionManager = require(\"./hotelmap/ExceptionManager\");\n\nvar _ExceptionManager2 = _interopRequireDefault(_ExceptionManager);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n//import mapboxgl from 'mapbox-gl';\n\n\nwindow.sys = {\n    domain: \"www\",\n    settings: {}\n};\n\nfunction getUrlParams(search) {\n    var hashes = search.slice(search.indexOf('?') + 1).split('&');\n    return hashes.reduce(function (params, hash) {\n        var _hash$split = hash.split('='),\n            _hash$split2 = _slicedToArray(_hash$split, 2),\n            key = _hash$split2[0],\n            val = _hash$split2[1];\n\n        return Object.assign(params, _defineProperty({}, key, decodeURIComponent(val)));\n    }, {});\n}\n\n//\n// Main Application runner.\nwindow.addEventListener(\"DOMContentLoaded\", function () {\n    var parameters = getUrlParams(window.location.href);\n\n    if (!parameters.id) {}\n    //throw new ExceptionManager(\"Unable to process map request\");\n\n\n    //\n    // Configuration loader.\n    // We can only launch the map post-process.\n    sys.hotelFactory = new _HotelFactory2.default();\n    sys.loader = new _Loader2.default(parameters.id);\n    sys.loader.loadConfiguration(function (mapdata) {\n        //\n        // Configuration had loaded from source, let's ensure it's ok before\n        // we contiue with process.\n        // if(sys.loader.isValidConfiguration(mapdata)) {\n        sys.mapdata = mapdata;\n        sys.mapboxgl = mapboxgl;\n        sys.mapping = new _Mapping2.default(\"mapping\", \"mapbox://styles/scottberwicklondontown/ciwxa4nns00hm2ppv9iltdizw\", mapdata.map_latitude, mapdata.map_longitude, mapdata.map_zoom);\n\n        //\n        // Need to initialise a new HotelFactory()\n        // This will accociate a moveend event call to map and spawn searches.\n        _Events2.default.fillHeader();\n        _Events2.default.attachHotelLoader();\n        _Events2.default.addSearchResultsView();\n        _Events2.default.addSettingsOpenButtonEvent();\n        _Events2.default.addRightUICloseEvent();\n        _Events2.default.addHotelClickEvent();\n    });\n});\n\n},{\"./hotelmap/ExceptionManager\":1,\"./hotelmap/Mapping\":2,\"./hotelmap/configuration/Loader\":3,\"./hotelmap/events/Events\":4,\"./hotelmap/hotels/HotelFactory\":6}]},{},[10]);\n"]}